# 서버리스 컴퓨팅

## 소프트웨어 아키텍처 패러다임의 변화
On-Premise ---(인프라 비용 절감 및 구축 시간 단축)---> VM<br>
VM ---(관리포인트 축소 및 배포 시간 단축)---> Container<br>
Container ---(기술적 진입장벽 해소 및 유휴 시간 없음) ---> Serverless Computing<br>

## 구축 환경 별 비교
|특징|On-Premise|VM|Container|Serverless Computing|
|---|---|---|---|---|
|배포시간|Weeks|Minutes|Seconds|Milliseconds|
|관리범위|인프라/OS/미들웨어/소스|OS/미들웨어/소스|미들웨어/소스|소스|
|확장|주문 후 직접|직접|직접|자동|
|비용|구매 시 1회|시간,분 단위|시간,분 단위|초 단위 & 실행 시간 기준|
|HA|필요|필요|필요|자동|
|추상화|N/A|하드웨어|OS|런타임|

## CSP별 Serverless Computing 서비스
- AWS Lambda
- Azure Functions
- Google Cloud Functions
- IBM Cloud Functions

## 특징
- Serverless : CSP에서 소스를 제외한 모든 영역을 관리해줌
- Event-driven : 사전에 등록한 함수(코드)가 이벤트가 발생될 때마다 동작
- 생산성 향상 : 소스 로직에만 집중할 수 있음 & 언어 dependency가 낮음
- 확장성 : 요청 수에 맞게 자동으로 확장/축소함
- 비용 효율성 : 실행시간 & 요청 횟수로만 과금 = 유휴시간 없음

## 동작 방식
1. 이벤트 발생 = 서버리스 컴퓨팅 trigger됨
2. 함수 처리를 위한 컨테이너 할당
3-1. 스토리지에 저장된 함수 코드 무결성 체크 후 컨테이너에 등록
3-2. 이벤트 소스를 함수에 전달
4. 함수 코드 실행
5. 결과값 반환
6. 컨테이너 회수

## 도입 시 고려사항
- 공급업체 종속성 (Vendor Lock-in)
  - CSP 간 호환이 되지 않으므로 이관 시 막대한 비용 발생
  - 오픈소스 서버리스 컴퓨팅 플랫폼 고려 필요
- 공급업체별 SLA 차이점
  - CSP에서 서버 관리를 담당하지만, 이슈 발생 시 책임 영역이 공급업체별로 상이함
  - 크리티컬한 업무에는 도입 지양 또는 오류 상황 대비 필요
- 복잡한 운영
  - 로그 보관 비용 발생
  - 문제 상황 발생 시 롤백 방안 마련 필요
  - 트리거 또는 연계 서비스 관련 권한 관리 필요
- 제약 사항
  - 함수 최대 실행 시간 : 최대 15분
  - 최대 실행 함수 갯수 제한 : CSP별 다름
  - 콜드스타트 지연시간 : 컨테이너 할당에 어느 정도 시간이 걸림 (최대 10초 정도) 
